(this["webpackJsonpgallery-c"]=this["webpackJsonpgallery-c"]||[]).push([[0],{28:function(e,t,a){e.exports=a(44)},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(15),l=a(1),o=a(13),s=a(3),i={posts:[],favorites:[]};var u={loading:!1,globalLoading:!1};var m={currentUser:null,isAuth:!1};var d={message:"",show:!1};var p={favorites:[]};var f={photos:[]};var E={searched:[]};var h=Object(o.combineReducers)({galleryReduce:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;return"INIT_PHOTO_POST"===t.type||"CREATE_PHOTO_POST"===t.type?Object(s.a)(Object(s.a)({},e),{},{posts:t.payload}):"FAVORITES"===t.type?Object(s.a)(Object(s.a)({},e),{},{favorites:t.payload}):"SET_PHOTOS"===t.type?Object(s.a)(Object(s.a)({},e),{},{posts:t.payload}):e},loadingReduce:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;return"LOADING_TRUE"===t.type?Object(s.a)(Object(s.a)({},e),{},{loading:!0}):"LOADING_FALSE"===t.type?Object(s.a)(Object(s.a)({},e),{},{loading:!1}):"GLOBAL_LOADING_TRUE"===t.type?Object(s.a)(Object(s.a)({},e),{},{globalLoading:!0}):"GLOBAL_LOADING_FALSE"===t.type?Object(s.a)(Object(s.a)({},e),{},{globalLoading:!1}):e},authReduce:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;return"SET_USER"===t.type?Object(s.a)(Object(s.a)({},e),{},{currentUser:t.payload,isAuth:!0}):"DEL_USER"===t.type?{currentUser:null,isAuth:!1}:e},toastReduce:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;return"TOAST_VIEW"===t.type?Object(s.a)(Object(s.a)({},e),{},{message:t.payload,show:!0}):"TOAST_HIDE"===t.type?Object(s.a)(Object(s.a)({},e),{},{show:!1}):e},favoriteReduce:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;return"GET_FAVORITES"===t.type?Object(s.a)(Object(s.a)({},e),{},{favorites:t.payload}):e},getOwnPhotosReduce:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;return"GET_OWN_PHOTOS"===t.type?Object(s.a)(Object(s.a)({},e),{},{photos:t.payload}):e},searchReduce:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;return"GET_SEARCHED"===t.type?Object(s.a)(Object(s.a)({},e),{},{searched:t.payload}):e}}),v=a(25),b=a(26),g=a(6),O=a(7),j=a(4),N=a.n(j),y=a(8);function w(e){return S.apply(this,arguments)}function S(){return(S=Object(y.a)(N.a.mark((function e(t){var a,n,c,r,l,o=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"GET",n=o.length>2&&void 0!==o[2]?o[2]:null,c=o.length>3&&void 0!==o[3]?o[3]:{},e.prev=3,n&&(n=JSON.stringify(n),c["Content-type"]="application/json"),e.next=7,fetch(t,{method:a,body:n,headers:c});case 7:return r=e.sent,l=r.json(),e.abrupt("return",l);case 12:throw e.prev=12,e.t0=e.catch(3),e.t0;case 15:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}var k="http://localhost:5000/api/photo/posts",x="http://localhost:5000/favorite",_="http://localhost:5000/api/auth",T="http://localhost:5000";function A(){return function(){var e=Object(y.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(I()),e.next=4,fetch(T+"/api/photo/getmyphotos",{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,t(R()),t(P(n)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()}function L(e){return function(){var t=Object(y.a)(N.a.mark((function t(a){var n,c,r,l,o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),n=e.photo.split("/")[4],t.next=4,fetch("".concat(T,"/download/").concat(n));case 4:return(c=t.sent).ok||a(C("Error when try download file")),t.next=8,c.blob();case 8:r=t.sent,l=window.URL.createObjectURL(r),(o=document.createElement("a")).href=l,o.download=n,document.body.appendChild(o),o.click(),o.remove(),a(C("Download file started"));case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function F(){return function(){var e=Object(y.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(I()),e.next=3,fetch(x+"/get",{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,t(R()),t(H(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}function I(){return{type:"LOADING_TRUE"}}function R(){return{type:"LOADING_FALSE"}}function P(e){return{type:"GET_OWN_PHOTOS",payload:e}}function D(e){return{type:"SET_PHOTOS",payload:e}}function G(e){return{type:"SET_USER",payload:e}}function C(e){return{type:"TOAST_VIEW",payload:e}}function H(e){return{type:"GET_FAVORITES",payload:e}}var U=a(2),z=function(e){var t=e.activeElement,a=Object(l.d)((function(e){return e.authReduce.isAuth}));return c.a.createElement(c.a.Fragment,null,c.a.createElement("nav",null,c.a.createElement("div",{className:"nav-wrapper"},c.a.createElement(g.b,{to:"/",className:"brand-logo right"},"Wallpapers Gallery"),c.a.createElement("ul",{className:"left hide-on-med-and-down"},c.a.createElement("li",{className:"navbar-item ".concat("home"===t?"active":"")},c.a.createElement(g.c,{to:"/"},"Gallery")),c.a.createElement("li",{className:"navbar-item ".concat("create"===t?"active":"")},c.a.createElement(g.c,{to:"/create"},"Create")),c.a.createElement("li",{className:"navbar-item ".concat("favorite"===t?"active":"")},c.a.createElement(g.c,{to:"/favorite"},"Favorite")),c.a.createElement("li",{className:"navbar-item ".concat("search"===t?"active":"")},c.a.createElement(g.c,{to:"/search"},"Search")),!a&&c.a.createElement("li",{className:"auth"===t?"active":""},c.a.createElement(g.c,{to:"/auth"},"Sign in / Sign Up")),a&&c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:"dropdownbtn ".concat("profile"===t||"my"===t?"active":"")},c.a.createElement(g.c,{to:"/profile"},"Profile"),c.a.createElement("div",{className:"my-dropdown-content"},c.a.createElement("div",{className:"red accent-3 ".concat("profile"===t||"my"===t?"active":"")},c.a.createElement(g.c,{to:"/my"},"My posts")),c.a.createElement("div",{className:"red accent-3 ".concat("profile"===t||"my"===t?"active":"")},c.a.createElement(g.c,{to:"/feedback"},"Feedback")))))))))},B=a(27),Y=(a(39),function(e){var t=e.close,a=e.statistic,r=Object(n.useState)(!0),l=Object(U.a)(r,2),o=l[0],s=l[1],i=function(){s(!1),setTimeout((function(){t()}),200)};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"overlay ".concat(o?"is-hide":""),id:"overlay",onClick:i},c.a.createElement("div",{className:"modal-content"},c.a.createElement("span",{className:"button-close",onClick:i}),c.a.createElement("h4",null,"Statistic"),c.a.createElement("p",null,"Added favorites: ".concat(a.favorites)),c.a.createElement("p",null,"Downloads: ".concat(a.downloads)))))}),J=(a(40),function(e){var t=e.isOwnOptions,a=e.handlers,r=e.statistic,l=e.options,o=Object(n.useState)(!1),s=Object(U.a)(o,2),i=s[0],u=s[1],m=Object(n.useState)(!1),d=Object(U.a)(m,2),p=d[0],f=d[1],E=a.deletePhotoHandler,h=a.downloadHandler;return c.a.createElement(c.a.Fragment,null,p&&c.a.createElement(Y,{close:function(){f(!1)},statistic:r}),c.a.createElement("div",{className:"menu ".concat(i&&"open"," popup-menu")},c.a.createElement("div",{className:"menu__button",onClick:function(){u((function(e){return!e}))}},c.a.createElement("span",{className:"menu_button_visible"},"..."),c.a.createElement("span",{className:"menu_button_hidden"},"...")),c.a.createElement("div",{className:"menu__content"},c.a.createElement("ul",{className:"menu__content__list"},c.a.createElement("li",null,c.a.createElement("button",{className:"btn btn-deletePhoto waves-effect waves-light green",onClick:function(){return h(l)}}," ",c.a.createElement("i",{className:"material-icons tiny"},"file_download"),"Download")),t&&c.a.createElement("li",null,c.a.createElement("button",{className:"btn btn-deletePhoto waves-effect waves-light red",onClick:function(){return E(l)}}," ",c.a.createElement("i",{className:"material-icons tiny"},"delete_forever"),"Delete")),t&&c.a.createElement("li",null,c.a.createElement("button",{className:"btn btn-deletePhoto waves-effect waves-light blue",onClick:function(){f(!0)}}," ",c.a.createElement("i",{className:"material-icons tiny"},"arrow_upward"),"Statistic"))))))}),W=function(e){var t=e.options,a=e.handlers,r=Object(n.useState)(!1),o=Object(U.a)(r,2),s=o[0],i=o[1],u=Object(n.useState)(!1),m=Object(U.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),E=Object(U.a)(f,2),h=E[0],v=E[1],b=Object(l.c)(),g=a.downloadHandler,O=Object(l.d)((function(e){return e.authReduce.isAuth})),j=Object(l.d)((function(e){return e.favoriteReduce.favorites}));return Object(n.useEffect)((function(){j.length&&j.forEach((function(e){e.id===t.id&&p(!0)}))}),[j,t.id]),Object(n.useEffect)((function(){v(t.isLike)}),[t.isLike]),c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:"collection-item col s6"},c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-image"},c.a.createElement(B.LazyLoadImage,{src:t.photo,alt:t.title,height:"500px"}),c.a.createElement("span",{className:"card-title"}," ",t.title," "),c.a.createElement("span",{className:"card-author "}," ",t.author," "),c.a.createElement("div",{className:"card-tags "},t.tags.map((function(e){return c.a.createElement("a",{href:"/",className:"card-tag",key:"".concat(t.id,"-").concat(e)},e)}))),d?"":c.a.createElement("button",{className:"btn-floating halfway-fab waves-effect waves-light red ".concat(s?"anim-hidden":""),onClick:function(){O?(i(!0),setTimeout((function(){var e;b((e=t,function(){var t=Object(y.a)(N.a.mark((function t(a){var n,c;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(x+"/add",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,a(C(c.message)),a(H(c.favorites));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),p(!0)}),1e3)):b(C("You must be authorizate for adding wallpaper in favorites"))}}," ",c.a.createElement("i",{className:"material-icons"},"favorite_border")," "),c.a.createElement("button",{className:"btn-floating halfway-fab waves-effect waves-light btn-like ".concat(h?"red":"purple"),onClick:function(){var e;O?t.isLike?(b(function(e){return function(){var t=Object(y.a)(N.a.mark((function t(a){var n,c,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://localhost:5000/api/photo/unlike/"+e.id,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:return n=t.sent,t.next=6,n.json();case 6:return t.sent,t.next=9,fetch(k,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 9:return c=t.sent,t.next=12,c.json();case 12:r=t.sent,console.log(r),a(D(r)),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),console.log(t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}()}(t)),v(!1)):(b((e=t,function(){var t=Object(y.a)(N.a.mark((function t(a){var n,c,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("http://localhost:5000/api/photo/like/"+e.id,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:return n=t.sent,t.next=6,n.json();case 6:return t.sent,t.next=9,fetch(k,{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 9:return c=t.sent,t.next=12,c.json();case 12:r=t.sent,console.log(r),a(D(r)),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(0),console.log(t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}())),v(!0)):b(C("You must be authorizate for adding wallpaper in favorites"))}}," ",c.a.createElement("i",{className:"material-icons"},"thumb_up")),c.a.createElement(J,{handlers:{downloadHandler:g},statistic:t.statistic,options:t})))))},V=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"fullscreen_block"},c.a.createElement("div",{className:"lds-roller"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null))))},M=function(e){var t=e.children;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"nothing-wrapper"},c.a.createElement("div",{className:"nothing-text"},t)))},q=function(){var e=Object(l.c)(),t=Object(n.useState)(!1),a=Object(U.a)(t,2),r=a[0],o=a[1];Object(n.useEffect)((function(){e(function(){var e=Object(y.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOADING_TRUE"}),e.next=3,w(k,"GET",null,{Authorization:"Bearer ".concat(localStorage.getItem("token"))});case 3:a=e.sent,t({type:"LOADING_FALSE"}),t({type:"INIT_PHOTO_POST",payload:a});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(F())}),[e]);var s=Object(l.d)((function(e){return e.galleryReduce.posts})),i=Object(l.d)((function(e){return e.loadingReduce.loading}));Object(n.useEffect)((function(){o(i)}),[i]);var u=c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"nothing-text_span"},"No posts"),c.a.createElement(g.b,{to:"/create"},"You can create own post")),m=function(t){e(L(t))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(z,{activeElement:"home"}),c.a.createElement("div",{className:"container"},c.a.createElement("main",null,c.a.createElement("ul",{className:"collection"},r&&c.a.createElement(V,null),s.length?s.map((function(e){return c.a.createElement(W,{key:e.id,options:e,handlers:{downloadHandler:m}})})):c.a.createElement(M,null,u)))))},K=function(){var e=Object(l.c)(),t=Object(n.useState)(!1),a=Object(U.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)(""),i=Object(U.a)(s,2),u=i[0],m=i[1],d=Object(l.d)((function(e){var t;return null===(t=e.authReduce.currentUser)||void 0===t?void 0:t.id})),p=Object(l.d)((function(e){return e.authReduce.isAuth})),f=Object(l.d)((function(e){return e.loadingReduce.loading}));Object(n.useEffect)((function(){d&&m(d)}),[d]);return Object(n.useEffect)((function(){o(f)}),[f]),c.a.createElement(c.a.Fragment,null,c.a.createElement(z,{activeElement:"create"}),c.a.createElement("div",{className:"container"},c.a.createElement("main",null,c.a.createElement("h1",null,"Create Page"),!p&&c.a.createElement("p",null,"You must ",c.a.createElement(g.b,{to:"/auth"},"Sign in / Sign up")," for creating post"),c.a.createElement("form",{onSubmit:function(t){var a;t.preventDefault(),t.target.elements.userId.value=u,e((a=t.target,function(){var e=Object(y.a)(N.a.mark((function e(t){var n,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOADING_TRUE"}),e.next=3,fetch("http://localhost:5000/upload/new",{method:"POST",body:new FormData(a)});case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,t({type:"LOADING_FALSE"}),t(C(c.message));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},r&&c.a.createElement(V,null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"input-field col s10"},c.a.createElement("input",{id:"createPhotoPost",name:"photoTitle",type:"text",className:"PhotoPost",disabled:!p}),c.a.createElement("label",{htmlFor:"createPhotoPost"},"Title for photo post")),c.a.createElement("div",{className:"input-field col s10"},c.a.createElement("input",{id:"createPhotoPostTags",name:"photoTags",type:"text",className:"photoTags",disabled:!p}),c.a.createElement("label",{htmlFor:"createPhotoPostTags"},"Tags for your photo"),c.a.createElement("span",{className:"helper-text"},"Write separated by commas")),c.a.createElement("div",{className:"input-field col s10"},c.a.createElement("input",{type:"file",name:"photoSend",className:"sendPhoto",accept:"image/*",disabled:!p}),c.a.createElement("input",{type:"hidden",name:"userId"})),c.a.createElement("div",{className:"input-field"},c.a.createElement("button",{className:"waves-effect waves-light btn",type:"submit",disabled:!p},"Create")))))))},Q=function(e){var t=e.options,a=e.handlers,r=Object(n.useState)(!1),o=Object(U.a)(r,2),s=o[0],i=o[1],u=Object(l.c)(),m=a.downloadHandler;return c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:"collection-item col s6"},c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-image"},c.a.createElement("img",{src:t.photo,alt:t.title}),c.a.createElement("span",{className:"card-title"}," ",t.title," "),c.a.createElement("span",{className:"card-author "}," ",t.author," "),c.a.createElement("button",{className:"btn-floating halfway-fab waves-effect waves-light red ".concat(s?"anim-hidden":""),onClick:function(){i(!0),setTimeout((function(){var e;u((e=t,function(){var t=Object(y.a)(N.a.mark((function t(a){var n,c;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(x+"/remove",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,a(C(c.message)),a(H(c.favorites));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),400)}}," ",c.a.createElement("i",{className:"material-icons"},"remove")," "),c.a.createElement(J,{handlers:{downloadHandler:m},options:t})))))},X=function(){var e=Object(n.useState)(!1),t=Object(U.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),s=Object(U.a)(o,2),i=s[0],u=s[1],m=Object(l.c)(),d=Object(l.d)((function(e){return e.authReduce.isAuth})),p=Object(l.d)((function(e){return e.loadingReduce.loading})),f=Object(l.d)((function(e){return e.favoriteReduce.favorites}));Object(n.useEffect)((function(){d&&m(F())}),[m,d]),Object(n.useEffect)((function(){r(p)}),[p]),Object(n.useEffect)((function(){u(f)}),[f]);var E=function(e){m(L(e))},h=c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"nothing-text_span"},"No favorites"),c.a.createElement(g.b,{to:"/"},"You can add wallpapers on home page"));return c.a.createElement(c.a.Fragment,null,c.a.createElement(z,{activeElement:"favorite"}),c.a.createElement("div",{className:"container"},c.a.createElement("main",null,c.a.createElement("h1",null,"Favorite Page"),c.a.createElement("ul",{className:"collection row"},a&&c.a.createElement(V,null),i.length?i.map((function(e){return c.a.createElement(Q,{key:e.id,options:e,handlers:{downloadHandler:E}})})):c.a.createElement(M,null,h)))))},Z=function(){var e=Object(l.c)(),t=Object(n.useState)(""),a=Object(U.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)(""),i=Object(U.a)(s,2),u=i[0],m=i[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(z,{activeElement:"auth"}),c.a.createElement("div",{className:"container"},c.a.createElement("main",null,c.a.createElement("div",{className:"row-flex"},c.a.createElement("div",{className:"form-container"},c.a.createElement("form",{className:"form-sign",onSubmit:function(t){var a,n;t.preventDefault(),e((a=r,n=u,function(){var e=Object(y.a)(N.a.mark((function e(t){var c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("".concat(_,"/login"),"POST",{email:a,password:n});case 3:c=e.sent,localStorage.setItem("token",c.token),t(G(c)),t(C(c.message)),window.location.href="/",e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()))}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"input-field"},c.a.createElement("input",{id:"login-email",onChange:function(e){return o(e.target.value)},type:"email",className:"validate"}),c.a.createElement("label",{htmlFor:"login-email"},"Email"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"input-field"},c.a.createElement("input",{id:"login-password",onChange:function(e){return m(e.target.value)},type:"password"}),c.a.createElement("label",{htmlFor:"login-password"},"Password"))),c.a.createElement("button",{className:"btn btn-login waves-effect waves-light green lighten-1",type:"submit"},c.a.createElement("i",{className:"material-icons right"},"send"),"Sign In"),c.a.createElement(g.b,{to:"/register"},"create account")))))))},$=function(){var e=Object(l.d)((function(e){return e.getOwnPhotosReduce.photos.length})),t=Object(l.d)((function(e){return e.authReduce.currentUser})),a=Object(l.c)(),r=Object(n.useState)(0),o=Object(U.a)(r,2),s=o[0],i=o[1];return Object(n.useEffect)((function(){a(A())}),[a]),Object(n.useEffect)((function(){i(e||0)}),[e]),c.a.createElement(c.a.Fragment,null,c.a.createElement(z,{activeElement:"profile"}),c.a.createElement("div",{className:"container"},c.a.createElement("main",null,c.a.createElement("ul",{className:"collection"},c.a.createElement("li",{className:"collection-item"},c.a.createElement("div",{className:"profile_card"},c.a.createElement("p",null,"Your email: ",null===t||void 0===t?void 0:t.email," "),c.a.createElement("p",null,"Your username: ",null===t||void 0===t?void 0:t.username," "))),c.a.createElement("li",{className:"collection-item"},c.a.createElement("button",{className:"btn-small"},c.a.createElement(g.b,{to:"/my"},"My posts (",s,")"))),c.a.createElement("li",{className:"collection-item"},c.a.createElement("button",{className:"btn-small",onClick:function(){a((function(e){localStorage.removeItem("token"),e({type:"DEL_USER"}),window.location.href="/auth"}))}},"Log out"))))))},ee=function(e){var t=e.handlers,a=e.options,n=t.deletePhotoHandler,r=t.downloadHandler;return c.a.createElement(c.a.Fragment,null,c.a.createElement("li",{className:"collection-item col s6"},c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-image"},c.a.createElement("img",{src:a.photo,alt:a.title}),c.a.createElement("span",{className:"card-title"}," ",a.title," "),c.a.createElement("span",{className:"card-author "}," You "),c.a.createElement(J,{isOwnOptions:!0,handlers:{deletePhotoHandler:n,downloadHandler:r},options:a,statistic:a.statistic})))))},te=function(){var e=Object(n.useState)([]),t=Object(U.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(!1),s=Object(U.a)(o,2),i=s[0],u=s[1],m=Object(l.d)((function(e){return e.loadingReduce.loading})),d=Object(l.c)(),p=Object(l.d)((function(e){return e.getOwnPhotosReduce.photos})),f=function(e){var t;d((t=e,function(){var e=Object(y.a)(N.a.mark((function e(a){var n,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),!window.confirm("You sure delete ".concat(t.title))){e.next=14;break}return a({type:"LOADING_TRUE"}),e.next=6,fetch(T+"/api/photo/delete",{method:"POST",body:JSON.stringify(t),headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});case 6:return n=e.sent,e.next=9,n.json();case 9:c=e.sent,a(C(c.message)),console.log(c.posts),a(P(c.posts)),a({type:"LOADING_FALSE"});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))},E=function(e){d(L(e))};Object(n.useEffect)((function(){u(m)}),[m]),Object(n.useEffect)((function(){d(A())}),[d]),Object(n.useEffect)((function(){r(p)}),[p]);var h=c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"nothing-text_span"},"No posts"),c.a.createElement(g.b,{to:"/create"},"You can create own post"));return c.a.createElement(c.a.Fragment,null,c.a.createElement(z,{activeElement:"my"}),c.a.createElement("div",{className:"container"},c.a.createElement("main",null,c.a.createElement("ul",{className:"collection"},i&&c.a.createElement(V,null),a.length?a.map((function(e){return c.a.createElement(ee,{key:e.id,options:e,handlers:{deletePhotoHandler:f,downloadHandler:E}})})):c.a.createElement(M,null,h)))))},ae=function(){var e=Object(l.c)(),t=Object(n.useState)(""),a=Object(U.a)(t,2),r=a[0],o=a[1],s=Object(n.useState)(""),i=Object(U.a)(s,2),u=i[0],m=i[1],d=Object(n.useState)(""),p=Object(U.a)(d,2),f=p[0],E=p[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(z,{activeElement:"auth"}),c.a.createElement("div",{className:"form-container"},c.a.createElement("form",{className:"form-sign",onSubmit:function(t){var a,n,c;t.preventDefault(),e((a=r,n=u,c=f,function(){var e=Object(y.a)(N.a.mark((function e(t){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("".concat(_,"/registation"),"POST",{email:a,password:n,username:c});case 3:r=e.sent,t(C(r.message)),window.location.href="/auth",e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(0),console.log(e.t0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"input-field"},c.a.createElement("input",{id:"register-email",onChange:function(e){return o(e.target.value)},type:"email"}),c.a.createElement("label",{htmlFor:"register-email"},"Email"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"input-field"},c.a.createElement("input",{id:"username",onChange:function(e){return E(e.target.value)},type:"text"}),c.a.createElement("label",{htmlFor:"username"},"Username"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"input-field"},c.a.createElement("input",{id:"register-password",onChange:function(e){return m(e.target.value)},type:"password"}),c.a.createElement("label",{htmlFor:"register-password"},"Password"))),c.a.createElement("div",{className:"row"},c.a.createElement("button",{className:"btn waves-effect waves-light red darken-2",type:"submit"},"Sign Up")))))},ne=function(){var e=Object(n.useState)(""),t=Object(U.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)([]),s=Object(U.a)(o,2),i=s[0],u=s[1],m=Object(l.c)(),d=Object(l.d)((function(e){return e.searchReduce.searched}));Object(n.useEffect)((function(){u(d)}),[d]);var p=function(e){m(L(e))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(z,{activeElement:"search"}),c.a.createElement("main",null,c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"input-search"},c.a.createElement("form",{onSubmit:function(e){var t;e.preventDefault(),m((t=a,function(){var e=Object(y.a)(N.a.mark((function e(a){var n,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"LOADING_TRUE"}),e.next=3,fetch(T+"/search/search?search=".concat(t));case 3:return n=e.sent,e.next=6,n.json();case 6:c=e.sent,a({type:"GET_SEARCHED",payload:c}),a({type:"LOADING_FALSE"});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"input-field col s12"},c.a.createElement("input",{id:"text",type:"text",onChange:function(e){return r(e.target.value)},value:a,required:!0}),c.a.createElement("label",{htmlFor:"text"},"Enter category for wallpaper"),c.a.createElement("span",{className:"helper-text"},"Search criteria's"))))),c.a.createElement("ul",{className:"collection"},!i.length&&c.a.createElement(M,null,"No searched photos"),i.map((function(e){return c.a.createElement(W,{key:e.id,options:e,handlers:{downloadHandler:p}})}))))))},ce=(a(41),function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"fullscreen_block"},c.a.createElement("div",{className:"lds-ripple"},c.a.createElement("div",null),c.a.createElement("div",null))))}),re=(a(42),function(){var e=Object(n.useState)(""),t=Object(U.a)(e,2),a=t[0],r=t[1],o=Object(l.c)(),s=Object(l.d)((function(e){return e.loadingReduce.loading}));return c.a.createElement(c.a.Fragment,null,c.a.createElement(z,{activeElement:"Profile"}),c.a.createElement("main",{className:"container"},c.a.createElement("div",{className:"titles mb2"},c.a.createElement("h1",null,"Form feedback")),s&&c.a.createElement(V,null),c.a.createElement("form",{className:"row-flex-between",onSubmit:function(e){var t;e.preventDefault(),o((t=a,function(){var e=Object(y.a)(N.a.mark((function e(a){var n,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:"LOADING_TRUE"}),e.next=3,fetch(T+"/api/feedback/",{method:"POST",body:JSON.stringify({message:t}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:return(n=e.sent).ok||(console.log("Error"),a({type:"LOADING_FALSE"})),e.next=7,n.json();case 7:c=e.sent,console.log(c),a({type:"LOADING_FALSE"});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}},c.a.createElement("div",{className:"input-field w-80-p"},c.a.createElement("textarea",{onChange:function(e){return r(e.target.value)},id:"feeback_message",name:"feebackmessage",className:"materialize-textarea",disabled:s}),c.a.createElement("label",{htmlFor:"feeback_message"},"Your Message")),c.a.createElement("div",{className:"input-field"},c.a.createElement("button",{type:"submit",className:"waves-effect red accent-3 waves-light btn-large",disabled:s},"Send")))))});var le=Object(l.b)(null,null)((function(){var e=Object(l.c)(),t=Object(l.d)((function(e){return e.toastReduce.message})),a=Object(l.d)((function(e){return e.toastReduce.show})),r=Object(l.d)((function(e){return e.loadingReduce.globalLoading}));return Object(n.useEffect)((function(){e(function(){var e=Object(y.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:"GLOBAL_LOADING_TRUE"}),e.next=4,fetch("".concat(_,"/auth"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 4:return a=e.sent,e.next=7,a.json();case 7:if(n=e.sent,t({type:"GLOBAL_LOADING_FALSE"}),"Unauthorized"!==a.statusText){e.next=13;break}return localStorage.removeItem("token"),t({type:"DEL_USER"}),e.abrupt("return",!1);case 13:t(G(n.user)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(n.useEffect)((function(){a&&e({type:"TOAST_HIDE"})}),[t,a,e]),r?c.a.createElement(ce,null):c.a.createElement(c.a.Fragment,null,c.a.createElement(g.a,null,c.a.createElement(O.c,null,c.a.createElement(O.a,{path:"/",component:q,exact:!0}),c.a.createElement(O.a,{path:"/create",component:K}),c.a.createElement(O.a,{path:"/favorite",component:X}),c.a.createElement(O.a,{path:"/auth",component:Z}),c.a.createElement(O.a,{path:"/register",component:ae}),c.a.createElement(O.a,{path:"/profile",component:$}),c.a.createElement(O.a,{path:"/my",component:te}),c.a.createElement(O.a,{path:"/search",component:ne}),c.a.createElement(O.a,{path:"/feedback",component:re}))))})),oe=(a(43),Object(o.createStore)(h,Object(v.composeWithDevTools)(Object(o.applyMiddleware)(b.a)))),se=c.a.createElement(l.a,{store:oe},c.a.createElement(le,null));Object(r.render)(se,document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.3ff62dfa.chunk.js.map